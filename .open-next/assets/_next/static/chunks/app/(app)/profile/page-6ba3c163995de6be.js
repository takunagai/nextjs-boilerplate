(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[101],{18524:(e,r,t)=>{"use strict";t.d(r,{Ak:()=>l,II:()=>s,gK:()=>i,tP:()=>a});let s={SUBMIT_DEBOUNCE:1e3,VALIDATION_DELAY:300,ERROR_DISPLAY_DURATION:5e3},i={VIRTUALIZATION_THRESHOLD:100,LAZY_LOAD_OFFSET:200,RESIZE_DEBOUNCE:150},a={DESKTOP_BREAKPOINT:768,DESKTOP_BASE_SIZE:1.2,DESKTOP_SIZE_RANGE:.6,MOBILE_BASE_SIZE:.7,MOBILE_SIZE_RANGE:.3,DURATION_MIN:15,DURATION_MAX:25,INITIAL_DELAY_MAX:20,UPDATE_DELAY_MAX:5,UPDATE_INTERVAL:3e4,TOP_LIMIT:10,BOTTOM_LIMIT:90,DEFAULT_MAX_COMMENTS:15,MOBILE_MAX_COMMENTS:8,DESKTOP_MAX_COMMENTS:20},l={DEFAULT_INTERVAL_SECONDS:5,DEFAULT_ANIMATION_DURATION:1,DEFAULT_STAGGER_DELAY:.1,SECONDS_TO_MILLISECONDS:1e3,ANIMATION_SWITCH_RATIO:2,MIN_ITEMS_FOR_INDICATOR:1,ANIMATION_KEY_INCREMENT:1,INDICATOR_SIZE:8,ACTIVE_INDICATOR_SCALE:110,HOVER_INDICATOR_SCALE:105,INDICATOR_TRANSITION_DURATION:300}},43578:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var s=t(95155),i=t(19749),a=t(50007),l=t(98417),n=t(91753);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",success:"bg-green-600 text-white shadow-xs hover:bg-green-700 focus-visible:ring-green-200 dark:bg-green-600/80 dark:hover:bg-green-600",warning:"bg-yellow-500 text-white shadow-xs hover:bg-yellow-600 focus-visible:ring-yellow-200 dark:bg-yellow-600/80 dark:hover:bg-yellow-600",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline",hero:"bg-white/10 text-white border border-white/20 hover:bg-white/20"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let r,t,l,d,c,m,u,f=(0,i.c)(14);f[0]!==e?({className:r,variant:c,size:l,asChild:d,...t}=e,f[0]=e,f[1]=r,f[2]=t,f[3]=l,f[4]=d,f[5]=c):(r=f[1],t=f[2],l=f[3],d=f[4],c=f[5]);let x=void 0!==d&&d?a.DX:"button";return f[6]!==r||f[7]!==l||f[8]!==c?(m=(0,n.cn)("no-underline",o({variant:c,size:l}),r),f[6]=r,f[7]=l,f[8]=c,f[9]=m):m=f[9],f[10]!==x||f[11]!==t||f[12]!==m?(u=(0,s.jsx)(x,{"data-slot":"button",className:m,...t}),f[10]=x,f[11]=t,f[12]=m,f[13]=u):u=f[13],u}},48871:(e,r,t)=>{"use strict";t.d(r,{Separator:()=>n});var s=t(95155),i=t(19749),a=t(33408),l=t(91753);function n(e){let r,t,n,o,d,c,m=(0,i.c)(12);m[0]!==e?({className:r,orientation:n,decorative:o,...t}=e,m[0]=e,m[1]=r,m[2]=t,m[3]=n,m[4]=o):(r=m[1],t=m[2],n=m[3],o=m[4]);let u=void 0===n?"horizontal":n,f=void 0===o||o;return m[5]!==r?(d=(0,l.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",r),m[5]=r,m[6]=d):d=m[6],m[7]!==f||m[8]!==u||m[9]!==t||m[10]!==d?(c=(0,s.jsx)(a.b,{"data-slot":"separator-root",decorative:f,orientation:u,className:d,...t}),m[7]=f,m[8]=u,m[9]=t,m[10]=d,m[11]=c):c=m[11],c}},55918:(e,r,t)=>{"use strict";t.d(r,{TS:()=>u,Ty:()=>f,e1:()=>d,fo:()=>o,yI:()=>m});var s=t(95155),i=t(19749),a=t(12115),l=t(91753);function n(e){let{children:r,className:t,as:s="span"}=e;return a.createElement(s,{className:(0,l.cn)("sr-only",t)},r)}function o(e){let r,t,a=(0,i.c)(7),{id:n,children:o,className:d,visible:c}=e,m=void 0!==c&&c?"text-sm text-muted-foreground mt-1":"sr-only";return a[0]!==d||a[1]!==m?(r=(0,l.cn)(m,d),a[0]=d,a[1]=m,a[2]=r):r=a[2],a[3]!==o||a[4]!==n||a[5]!==r?(t=(0,s.jsx)("div",{id:n,className:r,children:o}),a[3]=o,a[4]=n,a[5]=r,a[6]=t):t=a[6],t}function d(e){let r,t,a,n=(0,i.c)(8),{errors:o,id:d,className:m}=e;return 0===o.length?null:(n[0]!==m?(r=(0,l.cn)("text-destructive",m),n[0]=m,n[1]=r):r=n[1],n[2]!==o?(t=1===o.length?(0,s.jsx)("p",{children:o[0]}):(0,s.jsx)("ul",{className:"list-disc list-inside space-y-1",children:o.map(c)}),n[2]=o,n[3]=t):t=n[3],n[4]!==d||n[5]!==r||n[6]!==t?(a=(0,s.jsx)("div",{id:d,role:"alert","aria-live":"assertive",className:r,children:t}),n[4]=d,n[5]=r,n[6]=t,n[7]=a):a=n[7],a)}function c(e,r){return(0,s.jsx)("li",{children:e},`error-${e}-${r}`)}function m(e){let r,t,a,o=(0,i.c)(9),{fieldName:d,error:c,id:m,className:u}=e;return c?(o[0]!==u?(r=(0,l.cn)("text-sm text-destructive mt-1",u),o[0]=u,o[1]=r):r=o[1],o[2]!==d?(t=(0,s.jsxs)(n,{children:[d,"のエラー: "]}),o[2]=d,o[3]=t):t=o[3],o[4]!==c||o[5]!==m||o[6]!==r||o[7]!==t?(a=(0,s.jsxs)("div",{id:m,role:"alert","aria-live":"polite",className:r,children:[t,c]}),o[4]=c,o[5]=m,o[6]=r,o[7]=t,o[8]=a):a=o[8],a):null}function u(e){let r,t,a=(0,i.c)(7),{message:n,id:o,className:d,visible:c}=e,m=void 0===c||c?"text-green-600 dark:text-green-400":"sr-only";return a[0]!==d||a[1]!==m?(r=(0,l.cn)(m,d),a[0]=d,a[1]=m,a[2]=r):r=a[2],a[3]!==o||a[4]!==n||a[5]!==r?(t=(0,s.jsx)("output",{id:o,"aria-live":"polite",className:r,children:n}),a[3]=o,a[4]=n,a[5]=r,a[6]=t):t=a[6],t}function f(e){let r,t,a,n,o=(0,i.c)(11),{error:d,title:c,id:m,className:u}=e,f=void 0===c?"エラーが発生しました":c;return d?(o[0]!==u?(r=(0,l.cn)("p-3 rounded-md bg-destructive/10 border border-destructive/20 text-destructive",u),o[0]=u,o[1]=r):r=o[1],o[2]!==f?(t=(0,s.jsx)("p",{className:"text-sm font-medium",children:f}),o[2]=f,o[3]=t):t=o[3],o[4]!==d?(a=(0,s.jsx)("p",{className:"text-sm",children:d}),o[4]=d,o[5]=a):a=o[5],o[6]!==m||o[7]!==r||o[8]!==t||o[9]!==a?(n=(0,s.jsxs)("div",{id:m,role:"alert",className:r,"aria-live":"polite",children:[t,a]}),o[6]=m,o[7]=r,o[8]=t,o[9]=a,o[10]=n):n=o[10],n):null}},65159:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,25208,23)),Promise.resolve().then(t.bind(t,97051)),Promise.resolve().then(t.bind(t,70831)),Promise.resolve().then(t.bind(t,48871))},65611:(e,r,t)=>{"use strict";t.d(r,{IX:()=>m,cR:()=>u});var s=t(1953);let i=e=>!e||""===e.trim()||!e.includes("<"),a=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,t=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t?s.Yj().min(1,{message:l(e)}).max(r,{message:`${e}は${r}文字以内で入力してください`}).refine(e=>i(e),{message:"HTMLタグを含めることはできません"}):s.Yj().optional().refine(e=>!e||""===e.trim()||e.length<=r,{message:`${e}は${r}文字以内で入力してください`}).refine(e=>i(e),{message:"HTMLタグを含めることはできません"})},l=e=>"名前"===e?"名前は必須です":`${e}を入力してください`,n=s.Yj().optional().refine(e=>!e||""===e.trim()||e.length<=2048,{message:"URLは2048文字以内で入力してください"}).refine(e=>{if(!e||""===e.trim())return!0;try{let r=new URL(e);return"https:"===r.protocol||"http:"===r.protocol}catch{return!1}},{message:"有効なURL（http://またはhttps://で始まる）を入力してください"}),o=a("表示名",0,50),d=a("自己紹介",0,500),c=a("所在地",0,100);s.Ik({name:a("名前",1,50,!0),email:s.Yj().email({message:"有効なメールアドレスを入力してください"}),displayName:o,bio:d,location:c,website:n,emailVisible:s.zM().optional().default(!1),profileVisible:s.zM().optional().default(!0)});let m=s.Ik({name:a("名前",1,50,!0),displayName:o,bio:d,location:c,website:n,emailVisible:s.zM().optional().default(!1),profileVisible:s.zM().optional().default(!0)}),u=s.Ik({confirmText:s.Yj().min(1,{message:"確認テキストを入力してください"}).refine(e=>"プロフィールを削除します"===e,{message:"正確な確認テキストを入力してください: 'プロフィールを削除します'"})})},70831:(e,r,t)=>{"use strict";t.d(r,{ProfileEditForm:()=>N});var s=t(95155),i=t(36751),a=t(88907),l=t(12115),n=t(88508),o=t(41154);let d=(0,o.createServerReference)("40b3e45620b870d91e1b19d49017c45b3da811ce48",o.callServer,void 0,o.findSourceMapURL,"updateProfile"),c=(0,o.createServerReference)("40f204f98dc2c6302726dd9027c039797f0f5f1cac",o.callServer,void 0,o.findSourceMapURL,"uploadProfileImage");var m=t(91753),u=t(55918);let f=(0,l.forwardRef)((e,r)=>{let{label:t,error:i,description:a,labelClassName:n,containerClassName:o,className:d,id:c,...f}=e,x=(0,l.useId)(),b=c||`checkbox-${x}`,p=i?`${b}-error`:void 0,h=a?`${b}-description`:void 0;return(0,s.jsxs)("div",{className:(0,m.cn)("space-y-2",o),children:[(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)("input",{ref:r,type:"checkbox",id:b,"aria-describedby":[h,p].filter(Boolean).join(" ")||void 0,"aria-invalid":i?"true":void 0,className:(0,m.cn)("mt-0.5 h-4 w-4 rounded border border-input bg-transparent","text-primary focus:ring-1 focus:ring-ring focus:ring-offset-0","disabled:cursor-not-allowed disabled:opacity-50",i&&"border-destructive focus:ring-destructive",d),...f}),(0,s.jsx)("label",{htmlFor:b,className:(0,m.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",n),children:t})]}),a&&h&&(0,s.jsx)(u.fo,{id:h,visible:!0,children:a}),i&&(0,s.jsx)(u.yI,{fieldName:t,error:i,id:p})]})});f.displayName="AccessibleCheckbox";var x=t(71074);let b=(0,l.forwardRef)((e,r)=>{let{label:t,error:i,description:a,showLabel:n=!0,labelClassName:o,containerClassName:d,className:c,id:f,required:x,...b}=e,p=(0,l.useId)(),h=f||`textarea-${p}`,g=i?`${h}-error`:void 0,v=a?`${h}-description`:void 0;return(0,s.jsxs)("div",{className:(0,m.cn)("space-y-2",d),children:[(0,s.jsxs)("label",{htmlFor:h,className:(0,m.cn)("block text-sm font-medium",n?"":"sr-only",o),children:[t,x&&(0,s.jsx)("span",{className:"text-destructive ml-1","aria-label":"必須",children:"*"})]}),(0,s.jsx)("textarea",{ref:r,id:h,"aria-describedby":[v,g].filter(Boolean).join(" ")||void 0,"aria-invalid":i?"true":void 0,"aria-required":x,className:(0,m.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","disabled:cursor-not-allowed disabled:opacity-50",i&&"border-destructive focus-visible:ring-destructive",c),...b}),a&&v&&(0,s.jsx)(u.fo,{id:v,visible:!0,children:a}),i&&(0,s.jsx)(u.yI,{fieldName:t,error:i,id:g})]})});b.displayName="AccessibleTextarea";var p=t(43578),h=t(93456),g=t(48871),v=t(76720),j=t(65611);function N(e){let{initialProfile:r}=e,[t,o]=(0,l.useState)({isUploading:!1,imageUrl:r.image||""}),m=(0,n.mN)({resolver:(0,i.u)(j.IX),defaultValues:{name:r.name||"",displayName:r.displayName||"",bio:r.bio||"",location:r.location||"",website:r.website||"",emailVisible:r.emailVisible||!1,profileVisible:!1!==r.profileVisible}}),{handleSubmit:N,isSubmitting:y,submitError:_}=(0,v.k)({form:m,submitFn:async e=>await d(e)}),S=async e=>{let r=e.target.files?.[0];if(r){o(e=>({...e,isUploading:!0}));try{let e=new FormData;e.append("image",r);let t=await c(e);t.success&&t.data?.imageUrl?o(e=>({...e,imageUrl:t.data?.imageUrl||"",isUploading:!1})):o(e=>({...e,isUploading:!1}))}catch(e){console.error("画像アップロードエラー:",e),o(e=>({...e,isUploading:!1}))}}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(h.Zp,{children:[(0,s.jsxs)(h.aR,{children:[(0,s.jsx)(h.ZB,{children:"プロフィール画像"}),(0,s.jsx)(h.BT,{children:"あなたのプロフィール画像を設定できます。JPEG、PNG、WebP形式で5MB以下のファイルが使用できます。"})]}),(0,s.jsx)(h.Wu,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-primary/10 text-primary border-2 border-muted overflow-hidden",children:t.imageUrl?(0,s.jsx)(a.default,{src:t.imageUrl,alt:`${r.name||"ユーザー"}のプロフィール画像`,width:80,height:80,className:"h-full w-full object-cover"}):(0,s.jsx)("span",{className:"text-2xl font-semibold",children:r.name?.[0]||"U"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"file",id:"profile-image-upload",accept:"image/jpeg,image/png,image/webp",onChange:S,disabled:t.isUploading,className:"sr-only","aria-describedby":"profile-image-description"}),(0,s.jsx)("label",{htmlFor:"profile-image-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary disabled:opacity-50 disabled:cursor-not-allowed","aria-describedby":"profile-image-description",children:t.isUploading?"アップロード中...":"画像を選択"}),(0,s.jsx)("p",{id:"profile-image-description",className:"mt-1 text-xs text-muted-foreground",children:"JPEG、PNG、WebP形式、5MB以下"})]})]})})]}),(0,s.jsxs)(h.Zp,{children:[(0,s.jsxs)(h.aR,{children:[(0,s.jsx)(h.ZB,{children:"基本情報"}),(0,s.jsx)(h.BT,{children:"公開されるプロフィール情報を編集できます。"})]}),(0,s.jsx)(h.Wu,{children:(0,s.jsxs)("form",{onSubmit:m.handleSubmit(N),className:"space-y-6",children:[(0,s.jsx)(u.Ty,{error:_}),(0,s.jsx)(x.b,{label:"名前",description:"他のユーザーに表示される名前です",required:!0,...m.register("name"),error:m.formState.errors.name?.message}),(0,s.jsx)(x.b,{label:"表示名",description:"名前とは別の表示名を設定できます（任意）",placeholder:"例: ニックネーム",...m.register("displayName"),error:m.formState.errors.displayName?.message}),(0,s.jsx)(g.Separator,{}),(0,s.jsx)(b,{label:"自己紹介",description:"あなたについて簡単に紹介してください（500文字以内）",placeholder:"例: エンジニアとして働いています。趣味は読書と映画鑑賞です。",rows:4,...m.register("bio"),error:m.formState.errors.bio?.message}),(0,s.jsx)(x.b,{label:"所在地",description:"お住まいの地域を入力してください（任意）",placeholder:"例: 東京都",...m.register("location"),error:m.formState.errors.location?.message}),(0,s.jsx)(x.b,{label:"ウェブサイト",description:"個人サイトやブログのURLを入力してください（任意）",placeholder:"https://example.com",type:"url",...m.register("website"),error:m.formState.errors.website?.message}),(0,s.jsx)(g.Separator,{}),(0,s.jsxs)("fieldset",{className:"space-y-4",children:[(0,s.jsx)("legend",{className:"text-sm font-medium",children:"プライバシー設定"}),(0,s.jsx)(f,{label:"メールアドレスを公開する",description:"チェックすると、他のユーザーにメールアドレスが表示されます",...m.register("emailVisible")}),(0,s.jsx)(f,{label:"プロフィールを公開する",description:"チェックを外すと、プロフィールが非公開になります",...m.register("profileVisible")})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)(p.$,{type:"submit",disabled:y,"aria-describedby":y?"submit-status":void 0,children:y?"更新中...":"プロフィールを更新"}),(0,s.jsx)(p.$,{type:"button",variant:"outline",onClick:()=>m.reset(),disabled:y,children:"リセット"})]}),y&&(0,s.jsx)("p",{id:"submit-status",className:"sr-only","aria-live":"polite",children:"プロフィールを更新しています"})]})})]})]})}},71074:(e,r,t)=>{"use strict";t.d(r,{b:()=>n});var s=t(95155),i=t(12115),a=t(91753),l=t(55918);let n=(0,i.forwardRef)((e,r)=>{let{label:t,error:n,description:o,showLabel:d=!0,labelClassName:c,containerClassName:m,className:u,id:f,required:x,...b}=e,p=(0,i.useId)(),h=f||`input-${p}`,g=n?`${h}-error`:void 0,v=o?`${h}-description`:void 0;return(0,s.jsxs)("div",{className:(0,a.cn)("space-y-2",m),children:[(0,s.jsxs)("label",{htmlFor:h,className:(0,a.cn)("block text-sm font-medium",d?"":"sr-only",c),children:[t,x&&(0,s.jsx)("abbr",{className:"text-destructive ml-1 no-underline",title:"必須",children:"*"})]}),(0,s.jsx)("input",{ref:r,id:h,"aria-describedby":[v,g].filter(Boolean).join(" ")||void 0,"aria-invalid":n?"true":void 0,"aria-required":x,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors","file:border-0 file:bg-transparent file:text-sm file:font-medium","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","disabled:cursor-not-allowed disabled:opacity-50",n&&"border-destructive focus-visible:ring-destructive",u),...b}),o&&v&&(0,s.jsx)(l.fo,{id:v,visible:!0,children:o}),n&&(0,s.jsx)(l.yI,{fieldName:t,error:n,id:g})]})});n.displayName="AccessibleInput"},76720:(e,r,t)=>{"use strict";t.d(r,{k:()=>l});var s=t(12115),i=t(69172),a=t(18524);function l(e){let{form:r,submitFn:t,errorHandling:l={},successHandling:n={},onBeforeSubmit:o,onAfterSubmit:d}=e,{autoSetFieldErrors:c=!0,showErrorToast:m=!0,customErrorMessage:u="送信に失敗しました。後ほど再度お試しください。"}=l,{autoResetForm:f=!1,showSuccessToast:x=!0,customSuccessMessage:b="送信が完了しました",redirectTo:p}=n,[h,g]=(0,s.useState)(!1),[v,j]=(0,s.useState)(null),[N,y]=(0,s.useState)({type:null,message:""});return{isSubmitting:h,submitError:v,submitStatus:N,handleSubmit:async e=>{g(!0),j(null),y({type:null,message:""});try{o&&await o(e);let s=await t(e);if(s.success){let e=s.data?.message||b;y({type:"success",message:e}),f&&r.reset(),x&&i.oR.success(e),p&&setTimeout(()=>{window.location.href=p},1e3)}else{let e=s.error?.message||u;j(e),y({type:"error",message:e}),c&&s.error?.details?.fieldErrors&&(e=>{for(let[t,s]of Object.entries(e))r.setError(t,{message:s})})(s.error.details.fieldErrors),m&&i.oR.error(e)}return d&&await d(s,e),s}catch(s){console.error("フォーム送信エラー:",s);let r="送信処理中にエラーが発生しました";j(r),y({type:"error",message:r}),m&&i.oR.error(r);let t={success:!1,error:{message:r,code:"UNEXPECTED_ERROR"}};return d&&await d(t,e),t}finally{setTimeout(()=>{g(!1)},a.II.SUBMIT_DEBOUNCE)}},resetError:()=>{j(null)},resetStatus:()=>{y({type:null,message:""})}}}},87822:(e,r,t)=>{"use strict";t.d(r,{Cf:()=>u,Es:()=>x,L3:()=>b,c7:()=>f,lG:()=>o,rr:()=>p,zM:()=>d});var s=t(95155),i=t(19749),a=t(22659),l=t(60160),n=t(91753);function o(e){let r,t,l=(0,i.c)(4);return l[0]!==e?({...r}=e,l[0]=e,l[1]=r):r=l[1],l[2]!==r?(t=(0,s.jsx)(a.bL,{"data-slot":"dialog",...r}),l[2]=r,l[3]=t):t=l[3],t}function d(e){let r,t,l=(0,i.c)(4);return l[0]!==e?({...r}=e,l[0]=e,l[1]=r):r=l[1],l[2]!==r?(t=(0,s.jsx)(a.l9,{"data-slot":"dialog-trigger",...r}),l[2]=r,l[3]=t):t=l[3],t}function c(e){let r,t,l=(0,i.c)(4);return l[0]!==e?({...r}=e,l[0]=e,l[1]=r):r=l[1],l[2]!==r?(t=(0,s.jsx)(a.ZL,{"data-slot":"dialog-portal",...r}),l[2]=r,l[3]=t):t=l[3],t}function m(e){let r,t,l,o,d=(0,i.c)(8);return d[0]!==e?({className:r,...t}=e,d[0]=e,d[1]=r,d[2]=t):(r=d[1],t=d[2]),d[3]!==r?(l=(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",r),d[3]=r,d[4]=l):l=d[4],d[5]!==t||d[6]!==l?(o=(0,s.jsx)(a.hJ,{"data-slot":"dialog-overlay",className:l,...t}),d[5]=t,d[6]=l,d[7]=o):o=d[7],o}function u(e){let r,t,o,d,u,f,x,b=(0,i.c)(12);return b[0]!==e?({className:t,children:r,...o}=e,b[0]=e,b[1]=r,b[2]=t,b[3]=o):(r=b[1],t=b[2],o=b[3]),b[4]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsx)(m,{}),b[4]=d):d=b[4],b[5]!==t?(u=(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),b[5]=t,b[6]=u):u=b[6],b[7]===Symbol.for("react.memo_cache_sentinel")?(f=(0,s.jsxs)(a.bm,{"data-slot":"dialog-close",className:"ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus-visible:ring-4 focus-visible:outline-1 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.V2x,{className:"size-4"}),(0,s.jsx)("span",{className:"sr-only",children:"閉じる"})]}),b[7]=f):f=b[7],b[8]!==r||b[9]!==o||b[10]!==u?(x=(0,s.jsxs)(c,{"data-slot":"dialog-portal",children:[d,(0,s.jsxs)(a.UC,{"data-slot":"dialog-content",className:u,...o,children:[r,f]})]}),b[8]=r,b[9]=o,b[10]=u,b[11]=x):x=b[11],x}function f(e){let r,t,a,l,o=(0,i.c)(8);return o[0]!==e?({className:r,...t}=e,o[0]=e,o[1]=r,o[2]=t):(r=o[1],t=o[2]),o[3]!==r?(a=(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",r),o[3]=r,o[4]=a):a=o[4],o[5]!==t||o[6]!==a?(l=(0,s.jsx)("div",{"data-slot":"dialog-header",className:a,...t}),o[5]=t,o[6]=a,o[7]=l):l=o[7],l}function x(e){let r,t,a,l,o=(0,i.c)(8);return o[0]!==e?({className:r,...t}=e,o[0]=e,o[1]=r,o[2]=t):(r=o[1],t=o[2]),o[3]!==r?(a=(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),o[3]=r,o[4]=a):a=o[4],o[5]!==t||o[6]!==a?(l=(0,s.jsx)("div",{"data-slot":"dialog-footer",className:a,...t}),o[5]=t,o[6]=a,o[7]=l):l=o[7],l}function b(e){let r,t,l,o,d=(0,i.c)(8);return d[0]!==e?({className:r,...t}=e,d[0]=e,d[1]=r,d[2]=t):(r=d[1],t=d[2]),d[3]!==r?(l=(0,n.cn)("text-lg leading-none font-semibold tracking-tight",r),d[3]=r,d[4]=l):l=d[4],d[5]!==t||d[6]!==l?(o=(0,s.jsx)(a.hE,{"data-slot":"dialog-title",className:l,...t}),d[5]=t,d[6]=l,d[7]=o):o=d[7],o}function p(e){let r,t,l,o,d=(0,i.c)(8);return d[0]!==e?({className:r,...t}=e,d[0]=e,d[1]=r,d[2]=t):(r=d[1],t=d[2]),d[3]!==r?(l=(0,n.cn)("text-muted-foreground text-sm",r),d[3]=r,d[4]=l):l=d[4],d[5]!==t||d[6]!==l?(o=(0,s.jsx)(a.VY,{"data-slot":"dialog-description",className:l,...t}),d[5]=t,d[6]=l,d[7]=o):o=d[7],o}},91753:(e,r,t)=>{"use strict";t.d(r,{cn:()=>a});var s=t(99065),i=t(66253);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,i.QP)((0,s.$)(r))}},93456:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>n,wL:()=>m});var s=t(95155),i=t(19749),a=t(91753);function l(e){let r,t,l,n,o=(0,i.c)(8);return o[0]!==e?({className:r,...t}=e,o[0]=e,o[1]=r,o[2]=t):(r=o[1],t=o[2]),o[3]!==r?(l=(0,a.cn)("bg-card text-card-foreground rounded-xl border shadow-sm",r),o[3]=r,o[4]=l):l=o[4],o[5]!==t||o[6]!==l?(n=(0,s.jsx)("div",{"data-slot":"card",className:l,...t}),o[5]=t,o[6]=l,o[7]=n):n=o[7],n}function n(e){let r,t,l,n,o=(0,i.c)(8);return o[0]!==e?({className:r,...t}=e,o[0]=e,o[1]=r,o[2]=t):(r=o[1],t=o[2]),o[3]!==r?(l=(0,a.cn)("flex flex-col gap-1.5 p-6",r),o[3]=r,o[4]=l):l=o[4],o[5]!==t||o[6]!==l?(n=(0,s.jsx)("div",{"data-slot":"card-header",className:l,...t}),o[5]=t,o[6]=l,o[7]=n):n=o[7],n}function o(e){let r,t,l,n,o=(0,i.c)(8);return o[0]!==e?({className:r,...t}=e,o[0]=e,o[1]=r,o[2]=t):(r=o[1],t=o[2]),o[3]!==r?(l=(0,a.cn)("leading-none font-semibold tracking-tight",r),o[3]=r,o[4]=l):l=o[4],o[5]!==t||o[6]!==l?(n=(0,s.jsx)("div",{"data-slot":"card-title",className:l,...t}),o[5]=t,o[6]=l,o[7]=n):n=o[7],n}function d(e){let r,t,l,n,o=(0,i.c)(8);return o[0]!==e?({className:r,...t}=e,o[0]=e,o[1]=r,o[2]=t):(r=o[1],t=o[2]),o[3]!==r?(l=(0,a.cn)("text-muted-foreground text-sm",r),o[3]=r,o[4]=l):l=o[4],o[5]!==t||o[6]!==l?(n=(0,s.jsx)("div",{"data-slot":"card-description",className:l,...t}),o[5]=t,o[6]=l,o[7]=n):n=o[7],n}function c(e){let r,t,l,n,o=(0,i.c)(8);return o[0]!==e?({className:r,...t}=e,o[0]=e,o[1]=r,o[2]=t):(r=o[1],t=o[2]),o[3]!==r?(l=(0,a.cn)("p-6 pt-0",r),o[3]=r,o[4]=l):l=o[4],o[5]!==t||o[6]!==l?(n=(0,s.jsx)("div",{"data-slot":"card-content",className:l,...t}),o[5]=t,o[6]=l,o[7]=n):n=o[7],n}function m(e){let r,t,l,n,o=(0,i.c)(8);return o[0]!==e?({className:r,...t}=e,o[0]=e,o[1]=r,o[2]=t):(r=o[1],t=o[2]),o[3]!==r?(l=(0,a.cn)("flex items-center p-6 pt-0",r),o[3]=r,o[4]=l):l=o[4],o[5]!==t||o[6]!==l?(n=(0,s.jsx)("div",{"data-slot":"card-footer",className:l,...t}),o[5]=t,o[6]=l,o[7]=n):n=o[7],n}},97051:(e,r,t)=>{"use strict";t.d(r,{ProfileDangerZone:()=>j});var s=t(95155),i=t(19749),a=t(36751),l=t(39200),n=t(41691),o=t(12115),d=t(88508),c=t(41154);let m=(0,c.createServerReference)("40c95456152621360f98795274816db1d325eaeb7a",c.callServer,void 0,c.findSourceMapURL,"requestEmailChange"),u=(0,c.createServerReference)("408a947867e86b5994a0fe64e6275ebc80b07ecd28",c.callServer,void 0,c.findSourceMapURL,"deleteProfile");var f=t(71074),x=t(55918),b=t(43578),p=t(93456),h=t(87822),g=t(76720),v=t(65611);function j(e){let r,t,n,c,u,j,y,_,S,I,w,E,T,A,R,O,k,M,L,U,C,D,P,$,B,z,V,Z,F,Y,G,X=(0,i.c)(65),{userEmail:K}=e,[W,q]=(0,o.useState)(!1),[H,J]=(0,o.useState)(!1),[Q,ee]=(0,o.useState)("");(0,l.useRouter)(),X[0]===Symbol.for("react.memo_cache_sentinel")?(r={resolver:(0,a.u)(v.cR),defaultValues:{confirmText:""}},X[0]=r):r=X[0];let er=(0,d.mN)(r);X[1]!==er?(t={form:er,submitFn:N},X[1]=er,X[2]=t):t=X[2];let{handleSubmit:et,isSubmitting:es,submitError:ei}=(0,g.k)(t);X[3]!==Q?(n=async()=>{if(Q.trim())try{(await m(Q)).success&&(J(!1),ee(""))}catch(e){console.error("メールアドレス変更エラー:",e)}},X[3]=Q,X[4]=n):n=X[4];let ea=n;X[5]===Symbol.for("react.memo_cache_sentinel")?(c=(0,s.jsxs)(p.aR,{children:[(0,s.jsx)(p.ZB,{className:"text-destructive",children:"危険操作"}),(0,s.jsx)(p.BT,{children:"以下の操作は取り返しがつきません。慎重に行ってください。"})]}),X[5]=c):c=X[5],X[6]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.jsx)("h3",{className:"text-sm font-medium",children:"メールアドレス変更"}),X[6]=u):u=X[6];let el=K||"未設定";X[7]!==el?(j=(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["現在: ",el]}),X[7]=el,X[8]=j):j=X[8],X[9]===Symbol.for("react.memo_cache_sentinel")?(y=(0,s.jsx)(h.zM,{asChild:!0,children:(0,s.jsx)(b.$,{variant:"outline",size:"sm",children:"メールアドレスを変更"})}),X[9]=y):y=X[9],X[10]===Symbol.for("react.memo_cache_sentinel")?(_=(0,s.jsxs)(h.c7,{children:[(0,s.jsx)(h.L3,{children:"メールアドレス変更"}),(0,s.jsx)(h.rr,{id:"email-change-description",children:"新しいメールアドレスを入力してください。確認メールが送信されます。"})]}),X[10]=_):_=X[10],X[11]===Symbol.for("react.memo_cache_sentinel")?(S=e=>ee(e.target.value),X[11]=S):S=X[11],X[12]!==Q?(I=(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(f.b,{label:"新しいメールアドレス",type:"email",value:Q,onChange:S,placeholder:"new@example.com",required:!0})}),X[12]=Q,X[13]=I):I=X[13],X[14]===Symbol.for("react.memo_cache_sentinel")?(w=(0,s.jsx)(b.$,{variant:"outline",onClick:()=>J(!1),children:"キャンセル"}),X[14]=w):w=X[14];let en=!Q.trim();X[15]!==ea||X[16]!==en?(E=(0,s.jsxs)(h.Es,{children:[w,(0,s.jsx)(b.$,{onClick:ea,disabled:en,children:"確認メールを送信"})]}),X[15]=ea,X[16]=en,X[17]=E):E=X[17],X[18]!==I||X[19]!==E?(T=(0,s.jsxs)(h.Cf,{"aria-describedby":"email-change-description",children:[_,I,E]}),X[18]=I,X[19]=E,X[20]=T):T=X[20],X[21]!==H||X[22]!==T?(A=(0,s.jsxs)(h.lG,{open:H,onOpenChange:J,children:[y,T]}),X[21]=H,X[22]=T,X[23]=A):A=X[23],X[24]!==A||X[25]!==j?(R=(0,s.jsxs)("div",{className:"space-y-2",children:[u,j,A]}),X[24]=A,X[25]=j,X[26]=R):R=X[26],X[27]===Symbol.for("react.memo_cache_sentinel")?(O=(0,s.jsx)("h3",{className:"text-sm font-medium text-destructive",children:"アカウント削除"}),k=(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"アカウントを削除すると、すべてのデータが永久に失われます。この操作は取り消せません。"}),X[27]=O,X[28]=k):(O=X[27],k=X[28]),X[29]===Symbol.for("react.memo_cache_sentinel")?(M=(0,s.jsx)(h.zM,{asChild:!0,children:(0,s.jsx)(b.$,{variant:"destructive",size:"sm",children:"アカウントを削除"})}),X[29]=M):M=X[29],X[30]===Symbol.for("react.memo_cache_sentinel")?(L=(0,s.jsxs)(h.c7,{children:[(0,s.jsx)(h.L3,{className:"text-destructive",children:"アカウント削除の確認"}),(0,s.jsx)(h.rr,{id:"delete-account-description",children:"この操作は取り返しがつきません。すべてのデータが永久に削除されます。 続行するには「プロフィールを削除します」と正確に入力してください。"})]}),X[30]=L):L=X[30],X[31]!==er||X[32]!==et?(U=er.handleSubmit(et),X[31]=er,X[32]=et,X[33]=U):U=X[33],X[34]!==ei?(C=(0,s.jsx)(x.Ty,{error:ei,title:"削除処理でエラーが発生しました"}),X[34]=ei,X[35]=C):C=X[35],X[36]!==er?(D=er.register("confirmText"),X[36]=er,X[37]=D):D=X[37];let eo=er.formState.errors.confirmText?.message;X[38]!==D||X[39]!==eo?(P=(0,s.jsx)(f.b,{label:"確認テキスト",description:"「プロフィールを削除します」と正確に入力してください",placeholder:"プロフィールを削除します",required:!0,...D,error:eo}),X[38]=D,X[39]=eo,X[40]=P):P=X[40],X[41]===Symbol.for("react.memo_cache_sentinel")?($=()=>q(!1),X[41]=$):$=X[41],X[42]!==es?(B=(0,s.jsx)(b.$,{type:"button",variant:"outline",onClick:$,disabled:es,children:"キャンセル"}),X[42]=es,X[43]=B):B=X[43];let ed=es?"delete-status":void 0,ec=es?"削除中...":"削除を実行";return X[44]!==es||X[45]!==ed||X[46]!==ec?(z=(0,s.jsx)(b.$,{type:"submit",variant:"destructive",disabled:es,"aria-describedby":ed,children:ec}),X[44]=es,X[45]=ed,X[46]=ec,X[47]=z):z=X[47],X[48]!==B||X[49]!==z?(V=(0,s.jsxs)(h.Es,{className:"flex gap-2",children:[B,z]}),X[48]=B,X[49]=z,X[50]=V):V=X[50],X[51]!==es?(Z=es&&(0,s.jsx)("p",{id:"delete-status",className:"sr-only","aria-live":"polite",children:"アカウントを削除しています"}),X[51]=es,X[52]=Z):Z=X[52],X[53]!==U||X[54]!==C||X[55]!==P||X[56]!==V||X[57]!==Z?(F=(0,s.jsxs)(h.Cf,{className:"sm:max-w-md","aria-describedby":"delete-account-description",children:[L,(0,s.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[C,P,V,Z]})]}),X[53]=U,X[54]=C,X[55]=P,X[56]=V,X[57]=Z,X[58]=F):F=X[58],X[59]!==W||X[60]!==F?(Y=(0,s.jsxs)("div",{className:"space-y-2",children:[O,k,(0,s.jsxs)(h.lG,{open:W,onOpenChange:q,children:[M,F]})]}),X[59]=W,X[60]=F,X[61]=Y):Y=X[61],X[62]!==R||X[63]!==Y?(G=(0,s.jsxs)(p.Zp,{className:"border-destructive/20",children:[c,(0,s.jsxs)(p.Wu,{className:"space-y-4",children:[R,Y]})]}),X[62]=R,X[63]=Y,X[64]=G):G=X[64],G}async function N(e){let r=await u(e);return r.success&&await (0,n.CI)({callbackUrl:"/"}),r}}},e=>{e.O(0,[6446,8385,5208,2234,2506,3475,5870,9172,7819,8441,8261,7358],()=>e(e.s=65159)),_N_E=e.O()}]);