# 実装済みの機能

このドキュメントでは、現在のNext.jsボイラープレートに既に実装されている、モダンなフロントエンド開発のベストプラクティス要素をリストアップしています。これらの要素は、Webアプリケーションとウェブサイト開発における基盤として既に組み込まれており、プロジェクトですぐに活用できる機能です。

*最終更新: 2025年9月3日*

## 目次

### 🔐 認証・ユーザー管理システム
- 1 NextAuth.js v5 認証システム
- 2 プロフィール管理機能

### 🛡️ セキュリティ・エラーハンドリング
- 3 統合セキュリティミドルウェア
- 4 包括的エラー境界システム
- 5 ミニマルローディングシステム

### 🛍️ サービス・事業機能
- 6 写真撮影サービスページ
- 7 AI画像生成サービスページ
- 8 コンサルティングサービスページ
- 9 クリエイティブサービスページ
- 10 Web開発サービスページ
- 11 共有サービスコンポーネントアーキテクチャ

### 🎨 UI・UX コンポーネント
- 12 コンポーネント構造
- 13 テーマ切替機能
- 14 3D背景エフェクト
- 15 ミニマルアニメーション（ヒーローセクション）
- 16 拡張可能コンテンツコンポーネント

### ⚙️ 開発基盤・設定
- 17 環境変数による機能制御
- 18 フォームバリデーション（Zod v4 + React Hook Form）
- 19 サンプルページシステム
- 20 パンくずリスト
- 21 強化されたSEO最適化（robots.txt + 動的サイトマップ）
- 22 アクセシビリティ対応（WCAG 2.1 AA準拠）
- 23 パフォーマンス最適化（React 19 Compiler）

### 🧪 テスト・品質保証
- 24 単体テスト（Vitest）
- 25 E2Eテスト（Playwright）
- 26 アクセシビリティテスト

---

## 1. NextAuth.js v5 認証システム

- **推奨ツール**: NextAuth.js v5 (最新beta版), JWT戦略
- **目的**: セキュアで拡張可能な認証基盤、データベース不要の軽量実装
- **実装例**:

  ```typescript
  // src/lib/auth/index.ts
  import NextAuth from "next-auth";
  import Credentials from "next-auth/providers/credentials";
  import { authConfig } from "./config";
  
  export const { handlers, signIn, signOut, auth } = NextAuth({
    ...authConfig,
    providers: [
      Credentials({
        credentials: {
          email: { type: "email" },
          password: { type: "password" }
        },
        authorize: async (credentials) => {
          // カスタム認証ロジック
          return authenticateUser(credentials);
        },
      }),
    ],
  });
  ```

- **メリット**:
  - JWT戦略によりデータベース不要
  - タイプセーフな認証フロー
  - ミドルウェア連携による保護されたルート
  - 本番対応のセキュリティ設定
- **実装状況**: ✅ 完了（テストユーザー含む）

## 2. プロフィール管理機能

- **推奨ツール**: Zod v4スキーマバリデーション, React Hook Form
- **目的**: 型安全なユーザープロフィール管理、柔軟なバリデーション
- **実装例**:

  ```typescript
  // src/lib/validation/profile-schema.ts
  import { z } from "zod";
  
  export const profileDataSchema = z.object({
    name: z.string().min(1, "名前は必須です"),
    email: z.string().email("有効なメールアドレスを入力してください"),
    bio: z.string().max(500, "自己紹介は500文字以内で入力してください").optional(),
    website: z.string().url("有効なURLを入力してください").optional(),
  });
  
  export type ProfileData = z.infer<typeof profileDataSchema>;
  ```

- **メリット**:
  - ファクトリーパターンによる動的スキーマ生成
  - DRY原則に基づく再利用可能なバリデーション
  - 型推論による開発効率向上
  - エラーハンドリングの統一化
- **実装状況**: ✅ 完了（大規模リファクタリング済み）

## 3. 統合セキュリティミドルウェア

- **推奨アーキテクチャ**: 統合ミドルウェアによる包括的セキュリティ
- **目的**: Next.js 15 + Auth.js v5 統合、CSRF保護、レート制限、セキュリティヘッダー
- **実装例**:

  ```typescript
  // middleware.ts (プロジェクトルート)
  import { auth } from "@/lib/auth";
  import { NextResponse } from "next/server";
  
  export default auth((req) => {
    const response = NextResponse.next();
    
    // セキュリティヘッダーの自動注入
    setSecurityHeaders(response);
    
    // CSRF保護
    if (!validateCsrf(req)) {
      return new NextResponse("CSRF validation failed", { status: 403 });
    }
    
    // レート制限
    if (!applyRateLimit(req)) {
      return new NextResponse("Rate limit exceeded", { status: 429 });
    }
    
    return response;
  });
  ```

- **セキュリティ機能**:
  - Auth.js v5 との完全統合
  - CSRF トークンによる状態変更保護
  - API エンドポイントのレート制限
  - セキュリティヘッダーの自動注入（CSP、HSTS、X-Frame-Options等）
  - リクエストの入力値検証と XSS 対策
- **実装状況**: ✅ 完了（Phase 1: Middleware統合）

## 4. 包括的エラー境界システム

- **推奨アーキテクチャ**: ルート別エラー境界による優雅なエラーハンドリング
- **目的**: ユーザーフレンドリーなエラー処理、開発者向けデバッグサポート
- **実装構造**:

  ```
  src/app/
  ├── error.tsx              # ルートエラー境界
  ├── global-error.tsx       # グローバルエラー境界
  ├── (auth)/error.tsx       # 認証エラー専用
  ├── (app)/error.tsx        # ダッシュボードエラー専用
  ├── (site)/error.tsx       # 公開サイトエラー専用
  └── (examples)/error.tsx   # 開発者向けエラー境界
  ```

- **実装例**:

  ```typescript
  // src/app/(site)/error.tsx
  'use client';
  
  export default function SiteErrorPage({ error, reset }: ErrorPageProps) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <Card className="max-w-md w-full">
          <CardContent className="p-8 text-center space-y-6">
            <FaTriangleExclamation className="w-16 h-16 text-yellow-500 mx-auto" />
            <h1 className="text-2xl font-bold">問題が発生しました</h1>
            <p className="text-muted-foreground">
              ページの読み込み中にエラーが発生しました。
            </p>
            <Button onClick={reset} className="w-full">
              再試行
            </Button>
          </CardContent>
        </Card>
      </div>
    );
  }
  ```

- **エラー境界の特徴**:
  - **ルートエラー境界**: ユーザーフレンドリーなエラーページとリトライ機能
  - **認証エラー境界**: 認証固有のエラー処理と復旧オプション
  - **ダッシュボードエラー境界**: 保護エリアのデータ関連エラー処理
  - **公開サイトエラー境界**: ナビゲーション支援付きエラー処理
  - **開発者エラー境界**: スタックトレースとデバッグ情報
- **実装状況**: ✅ 完了（Phase 1-2: エラー境界システム）

## 5. ミニマルローディングシステム

- **推奨アーキテクチャ**: Suspense ベース、統一デザイン
- **目的**: パフォーマンス最適化、軽量ローディング UI
- **実装構造**:

  ```
  src/app/
  ├── loading.tsx              # メインローディングコンポーネント
  ├── (auth)/loading.tsx       # ルートローディングを再利用
  ├── (app)/loading.tsx        # ルートローディングを再利用
  ├── (site)/loading.tsx       # ルートローディングを再利用
  └── (examples)/loading.tsx   # ルートローディングを再利用
  ```

- **実装例**:

  ```typescript
  // src/app/loading.tsx
  export default function RootLoading() {
    return (
      <div style={{
        position: "fixed",
        inset: 0,
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        backgroundColor: "hsl(var(--background))",
        zIndex: 9999,
      }}>
        <style>{`
          @keyframes loading-spin {
            to { transform: rotate(360deg); }
          }
          .loading-spinner {
            width: 48px;
            height: 48px;
            border: 2px solid transparent;
            border-top-color: hsl(var(--primary));
            border-right-color: hsl(var(--primary) / 0.5);
            border-radius: 50%;
            animation: loading-spin 0.7s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
            will-change: transform;
            contain: layout style paint;
          }
        `}</style>
        <div className="loading-spinner" />
      </div>
    );
  }
  ```

- **ローディングシステムの特徴**:
  - **CSS-onlyアニメーション**: 外部依存なし、パフォーマンス最適化
  - **統一デザイン**: 全ルートで一貫したローディング体験
  - **GPU最適化**: transform と opacity のみを使用
  - **軽量実装**: インラインスタイルで即座にレンダリング
- **実装状況**: ✅ 完了（ミニマルデザインリファクタリング済み）

## 6. 写真撮影サービスページ

- **推奨アプローチ**: モジュラー設計、コンポーネント分離
- **目的**: プロフェッショナルな写真撮影サービスの紹介
- **実装コンポーネント**:
  - PhotographyHero - メインビジュアル
  - PhotographyGenres - 撮影ジャンル紹介
  - PhotographyGallery - 作品ギャラリー
  - PricingPlans - 料金プラン表示
  - EquipmentSection - 機材紹介
  - WorkflowTimeline - 撮影フロー
  - TestimonialsSection - お客様の声
  - PhotographyFAQ - よくある質問

- **特長**:
  - レスポンシブデザイン対応
  - アクセシビリティ準拠
  - SEO最適化済み
  - パフォーマンス最適化
- **実装状況**: ✅ 完了（13コンポーネント、600行→モジュラー化済み）

## 4. AI画像生成サービスページ

- **推奨アプローチ**: 最新AI技術のビジュアル展示
- **目的**: AI技術を活用した画像生成サービスの紹介
- **実装機能**:
  - AIツール紹介（Stable Diffusion, DALL-E等）
  - 生成例ギャラリー
  - 技術説明セクション
  - プライシング情報

- **メリット**:
  - 先進技術の分かりやすい説明
  - インタラクティブな要素
  - 実例による理解促進
- **実装状況**: ✅ 完了（レスポンシブ最適化済み）

## 5. コンサルティングサービスページ

- **推奨アプローチ**: 専門性とサービス内容の明確な提示
- **目的**: ビジネスコンサルティングサービスの総合案内
- **実装内容**:
  - サービス概要
  - コンサルタント紹介
  - 成功事例
  - 相談フロー

- **メリット**:
  - 信頼性の高いブランディング
  - 明確なサービス内容の説明
  - お客様との接点作り
- **実装状況**: ✅ 完了

## 6. クリエイティブサービスページ

- **推奨アプローチ**: 創造性とデザイン性の両立
- **目的**: デザイン・クリエイティブサービスの紹介
- **実装内容**:
  - ポートフォリオ展示
  - サービス詳細
  - 制作プロセス
  - 料金体系

- **メリット**:
  - ビジュアル重視のデザイン
  - 実績の効果的な展示
  - クリエイティブな表現
- **実装状況**: ✅ 完了

## 7. Web開発サービスページ

- **推奨アプローチ**: 技術力とサービス品質のアピール
- **目的**: Web開発・システム開発サービスの紹介
- **実装内容**:
  - 技術スタック紹介
  - 開発プロセス
  - 実績紹介
  - 技術サポート

- **メリット**:
  - 技術的専門性の証明
  - 開発フローの透明性
  - 信頼性の構築
- **実装状況**: ✅ 完了

## 11. 共有サービスコンポーネントアーキテクチャ

- **推奨アプローチ**: DRY原則、共有コンポーネントによるコード重複削減
- **目的**: サービスページ間の一貫性確保、保守性向上、開発効率化
- **実装構造**:

  ```
  src/components/services/
  ├── shared/                    # 共有コンポーネント
  │   ├── service-hero-section.tsx      # 共通ヒーローセクション
  │   ├── service-final-cta.tsx         # 共通CTAセクション
  │   └── index.ts                      # エクスポート管理
  ├── web-development/           # Web開発サービス専用
  ├── creative/                  # クリエイティブサービス専用
  └── consulting/                # コンサルティングサービス専用
  ```

- **実装例**:

  ```typescript
  // src/components/services/shared/service-hero-section.tsx
  export interface ServiceHeroSectionProps {
    title: React.ReactNode;
    description: React.ReactNode;
    contactButtonText?: string;
    backgroundGradient?: string;
    decorationColors?: {
      primary: string;
      secondary: string;
    };
    contactButtonClassName?: string;
  }
  
  export function ServiceHeroSection({
    title,
    description,
    contactButtonText = "お問い合わせ",
    backgroundGradient = "from-background/50 to-background",
    decorationColors = {
      primary: "bg-primary/10",
      secondary: "bg-secondary/10"
    },
    contactButtonClassName,
  }: ServiceHeroSectionProps) {
    return (
      <section className={`relative py-32 bg-gradient-to-b ${backgroundGradient}`}>
        {/* 装飾要素 */}
        <div className="absolute inset-0 overflow-hidden">
          <div className={`absolute top-20 left-10 w-32 h-32 ${decorationColors.primary} rounded-full blur-3xl`} />
          <div className={`absolute bottom-20 right-10 w-24 h-24 ${decorationColors.secondary} rounded-full blur-2xl`} />
        </div>
        
        <Container width="2xl" className="relative z-10">
          <div className="text-center space-y-8">
            <h1 className="text-4xl md:text-6xl font-bold leading-tight">
              {title}
            </h1>
            {description}
            <div className="pt-8">
              <Button size="lg" className={contactButtonClassName}>
                {contactButtonText}
              </Button>
            </div>
          </div>
        </Container>
      </section>
    );
  }
  ```

- **使用例**:

  ```typescript
  // src/components/services/web-development/hero-section.tsx
  import { ServiceHeroSection } from "../shared";
  
  export function WebDevHeroSection() {
    return (
      <ServiceHeroSection
        title={
          <>
            <span className="text-primary">AI</span> × 15年の制作経験で、
            <br />
            高品質なのに<span className="text-primary">お手頃価格</span>を実現
          </>
        }
        description={
          <p className="text-lg md:text-xl text-muted-foreground max-w-3xl leading-relaxed">
            最新の AI 技術を駆使してリサーチ・コンテンツ作成・コーディングを効率化。
            <br />
            制作期間とコストを大幅に削減しながら、15年の経験で培った品質は妥協しません。
          </p>
        }
        contactButtonText="無料相談を予約"
        backgroundGradient="from-blue-600/10 via-blue-400/5 to-background"
      />
    );
  }
  ```

- **コード削減効果**:
  - **Web開発サービス**: 15行（共有コンポーネント使用）←80行（個別実装）
  - **クリエイティブサービス**: 25行（カスタマイズ付き）←120行（個別実装）
  - **コンサルティングサービス**: 10行（基本実装）←60行（個別実装）
  - **全体のコード削減率**: 約75%（260行→50行）

- **メリット**:
  - DRY原則の徹底実践
  - デザインシステムの一貫性確保
  - メンテナンス性の大幅向上
  - 新サービスページの高速開発
  - TypeScriptによる型安全性
  - カスタマイゼーション柔軟性の確保
- **実装状況**: ✅ 完了（Phase 4: Component Colocation）

## 12. コンポーネント構造

- **推奨アプローチ**: 単一責任の原則、関心の分離
- **目的**: コードの保守性向上、可読性の向上
- **実装例**:

  ```
  src/components/
  ├── layout/             # レイアウト関連コンポーネント
  │   ├── header/         # ヘッダー関連コンポーネント
  │   │   ├── desktop-navigation.tsx
  │   │   └── mobile-navigation.tsx
  │   ├── header.tsx
  │   └── footer.tsx
  ├── theme/              # テーマ関連コンポーネント
  │   └── theme-switcher.tsx
  └── ui/                 # UI基本コンポーネント
      ├── button.tsx
      ├── card.tsx
      └── ...
  ```

- **メリット**:
  - コードの再利用性向上
  - 責任の明確な分離
  - テスト容易性の向上
  - 機能拡張の容易さ
- **導入タイミング**: プロジェクト設計時

## 10. 3D背景エフェクト（Digital Constellation）

- **推奨ツール**: React Three Fiber, Three.js
- **目的**: 視覚的インパクトの向上、ブランド体験の強化
- **実装例**:

  ```typescript
  // src/components/background/constellation/digital-constellation.tsx
  import { Canvas } from '@react-three/fiber';
  import { ConstellationScene } from './constellation-scene';
  
  export function DigitalConstellation({ nodeCount = 150 }: Props) {
    return (
      <Canvas className="absolute inset-0 -z-10">
        <ConstellationScene nodeCount={nodeCount} />
      </Canvas>
    );
  }
  ```

- **特長**:
  - モジュラー設計（13ファイルに分割）
  - パフォーマンス最適化済み
  - レスポンシブ対応
  - カスタマイズ可能なパラメータ
- **実装状況**: ✅ 完了（604行→13ファイルにリファクタリング済み）

## 15. ミニマルアニメーション（ヒーローセクション）

- **推奨ツール**: React hooks, CSS keyframes, Tailwind CSS
- **目的**: ホームページヒーローセクションの視覚的魅力向上、ブランドメッセージの効果的伝達
- **実装例**:

  ```typescript
  // src/components/home/minimal-animation.tsx
  export function MinimalAnimation({ className = "" }: MinimalAnimationProps) {
    const [animationStarted, setAnimationStarted] = useState(false);

    useEffect(() => {
      const timer = setTimeout(() => {
        setAnimationStarted(true);
      }, 100);
      return () => clearTimeout(timer);
    }, []);

    return (
      <div className={`relative ${className}`}>
        <h1 className="text-6xl leading-[1.2] md:text-6xl lg:text-7xl font-bold tracking-tight">
          {/* Web */}
          <span 
            className={`
              inline-block text-primary transition-all duration-600 ease-out
              ${animationStarted
                ? 'opacity-100 translate-y-0 animate-neon-glow'
                : 'opacity-0 translate-y-8'
              }
            `}
            style={{ 
              animationDelay: animationStarted ? '2s' : '0s',
              transitionDelay: '0.5s'
            }}
          >
            Web
          </span>
          
          {/* 段階的アニメーション: AI, Creative */}
          {/* ネオングロー効果付き */}
        </h1>
      </div>
    );
  }
  ```

- **アニメーション仕様**:
  - 段階的フェードイン（Web → AI → Creative）
  - ネオングロー効果（4.5秒サイクル）
  - レスポンシブ対応（モバイル改行制御）
  - 呼吸エフェクト（背景グラデーション）

- **CSS実装**:
  ```css
  /* globals.css */
  @keyframes neon-glow {
    0%, 100% {
      text-shadow: 
        0 0 5px currentColor,
        0 0 10px currentColor,
        0 0 15px currentColor,
        0 0 20px #0ea5e9;
    }
    50% {
      text-shadow: 
        0 0 2px currentColor,
        0 0 5px currentColor,
        0 0 8px currentColor,
        0 0 12px #0ea5e9;
    }
  }
  
  .animate-neon-glow {
    animation: neon-glow 4.5s ease-in-out infinite;
  }
  ```

- **特徴**:
  - React 19 Compiler 最適化対応
  - ARIA アクセシビリティ準拠
  - モバイルファースト設計
  - GPU加速プロパティ使用
  - 「×」記号はグロー効果除外

- **レスポンシブ仕様**:
  - デスクトップ: `text-7xl` 一行表示
  - モバイル: `text-6xl` 改行あり「Web × AI<br>× Creative」
  - タブレット: 中間サイズでの適応

- **パフォーマンス**:
  - 軽量な CSS animation (GPU加速)
  - React memo 不要（Compiler最適化）
  - 初期表示への影響なし
  - Core Web Vitals 準拠

- **実装状況**: ✅ 完了（Phase 1: Minimal Animation）

## 16. 拡張可能コンテンツコンポーネント

- **推奨アプローチ**: アコーディオン型UI、アクセシビリティ重視
- **目的**: コンテンツの段階的開示、UX向上
- **実装例**:

  ```typescript
  // src/components/ui/expandable-content.tsx
  import { useState } from 'react';
  import { ChevronDown, ChevronRight } from 'lucide-react';
  
  export function ExpandableContent({ title, children }: Props) {
    const [isExpanded, setIsExpanded] = useState(false);
    
    return (
      <div className="border rounded-lg p-4">
        <button
          onClick={() => setIsExpanded(!isExpanded)}
          aria-expanded={isExpanded}
          className="flex items-center gap-2 w-full text-left"
        >
          {isExpanded ? <ChevronDown /> : <ChevronRight />}
          <h3>{title}</h3>
        </button>
        {isExpanded && <div className="mt-4">{children}</div>}
      </div>
    );
  }
  ```

- **メリット**:
  - ARIA属性による完全なアクセシビリティ対応
  - カスタマイズ可能なスタイリング
  - キーボードナビゲーション対応
  - スクリーンリーダー対応
- **実装状況**: ✅ 完了（WCAG 2.1 AA準拠）

## 12. 環境変数による機能制御

- **推奨アプローチ**: Next.jsの環境変数、条件付きレンダリング
- **目的**: 環境ごとの機能制御、柔軟な設定管理
- **実装例**:

  ```typescript
  // src/lib/constants.ts
  export const SITE_NAME = 
    process.env.NEXT_PUBLIC_SITE_NAME || "Next.js Boilerplate";
    
  export const FEATURES = {
    THEME_SWITCHER: true, // テーマ切替機能を有効にするフラグ
  };
  
  export const THEME = {
    DEFAULT: "light", // light, dark, system
  };
  ```

- **メリット**:
  - 環境ごとの動作制御
  - 機能のフラグベース制御
  - 設定の一元管理
  - デプロイ環境に合わせた設定変更
- **導入タイミング**: 機能実装時

## 13. フォームバリデーション（Zod v4 + React Hook Form）

- **推奨ツール**: Zod v4.0.15, React Hook Form v7.58.1
- **目的**: 型安全なフォーム処理、統一的なバリデーション
- **実装例**:

  ```typescript
  // src/lib/validation/contact-schema.ts
  import { z } from "zod";
  
  export const contactFormSchema = z.object({
    name: z.string().min(1, "お名前を入力してください"),
    email: z.string().email("有効なメールアドレスを入力してください"),
    message: z.string().min(5, "メッセージは5文字以上で入力してください"),
  });
  
  export type ContactFormValues = z.infer<typeof contactFormSchema>;
  
  // ファクトリーパターンによる動的スキーマ生成
  export function createProfileSchemaWithFactory(options: {
    requireName: boolean;
    maxBioLength: number;
    allowEmptyWebsite: boolean;
  }) {
    return z.object({
      name: options.requireName 
        ? z.string().min(1, "名前は必須です")
        : z.string().optional(),
      bio: z.string().max(options.maxBioLength).optional(),
      website: options.allowEmptyWebsite 
        ? z.string().url().optional()
        : z.string().url("有効なURLを入力してください"),
    });
  }
  ```

- **メリット**:
  - Zod v4の最新機能（パフォーマンス向上）
  - ファクトリーパターンによる再利用性
  - TypeScript型推論の完全活用
  - 統一エラーハンドリング
- **実装状況**: ✅ 完了（DRY原則適用済み）

## 9. テーマ切替機能

- **推奨ツール**: next-themes, Tailwind CSS
- **目的**: ユーザー体験の向上、アクセシビリティの改善
- **実装例**:

  ```typescript
  // src/components/theme/theme-switcher.tsx
  import { useTheme } from "next-themes";
  import { Button } from "@/components/ui/button";
  import { THEME } from "@/lib/constants";
  
  export function ThemeSwitcher() {
    const { theme, setTheme } = useTheme();
    
    const toggleTheme = () => {
      if (theme === "light") setTheme("dark");
      else if (theme === "dark") setTheme("system");
      else setTheme("light");
    };
    
    return (
      <Button
        variant="ghost"
        size="icon"
        onClick={toggleTheme}
        aria-label="テーマを切り替える"
      >
        {/* アイコンコンポーネント */}
      </Button>
    );
  }
  ```

- **メリット**:
  - ユーザーの好みに合わせた表示設定
  - ダークモードによるバッテリー消費の軽減
  - 目の疲れを軽減する視覚的な選択肢の提供
- **導入タイミング**: UI基盤構築時

## 4. フォームバリデーション

- **推奨ツール**: react-hook-form, zod
- **目的**: ユーザー入力の検証、型安全なフォーム処理
- **実装例**:

  ```typescript
  // src/lib/validation/contact-schema.ts
  import { z } from "zod";
  
  export const contactFormSchema = z.object({
    name: z.string().min(1, "お名前を入力してください"),
    email: z.string().email("有効なメールアドレスを入力してください"),
    message: z.string().min(5, "メッセージは5文字以上で入力してください"),
  });
  
  export type ContactFormValues = z.infer<typeof contactFormSchema>;
  ```

- **メリット**:
  - 型安全なフォーム処理
  - クライアントサイドでのバリデーション
  - エラーメッセージのカスタマイズ
  - 再利用可能なバリデーションスキーマ
- **導入タイミング**: フォーム設計時

## 5. サンプルページ

- **推奨アプローチ**: グループ化されたルート構造(App Router)
- **目的**: 開発効率の向上、コンポーネントのショーケース
- **実装例**:

  ```tsx
  // src/app/(examples)/examples/page.tsx
  export default function ExamplesPage() {
    return (
      <div>
        <h1>サンプルページ一覧</h1>
        <ul>
          <li><Link href="/examples/form">フォームサンプル</Link></li>
          <li><Link href="/examples/data-fetching">データ取得サンプル</Link></li>
          <li><Link href="/examples/ui-components">UIコンポーネント</Link></li>
        </ul>
      </div>
    );
  }
  ```

- **メリット**:
  - 新規開発者の学習コスト削減
  - 実装例のリファレンスとして活用可能
  - プロジェクト固有のコンポーネント使用法の提示
- **導入タイミング**: 開発初期段階

## 6. パンくずリスト

- **推奨アプローチ**: コンポーネントベース、JSON-LDによる構造化データ
- **目的**: ユーザーナビゲーションの改善、SEO向上
- **実装例**:

  ```tsx
  // src/components/ui/breadcrumb.tsx
  import Link from "next/link";
  
  type BreadcrumbItem = {
    label: string;
    href?: string;
  };
  
  type BreadcrumbProps = {
    items: BreadcrumbItem[];
  };
  
  export function Breadcrumb({ items }: BreadcrumbProps) {
    return (
      <nav aria-label="パンくずリスト">
        <ol className="flex flex-wrap gap-1 text-sm">
          <li>
            <Link href="/">ホーム</Link>
            <span className="mx-2">/</span>
          </li>
          {items.map((item, index) => (
            <li key={item.label}>
              {index === items.length - 1 ? (
                <span aria-current="page">{item.label}</span>
              ) : (
                <>
                  <Link href={item.href || "#"}>{item.label}</Link>
                  <span className="mx-2">/</span>
                </>
              )}
            </li>
          ))}
        </ol>
      </nav>
    );
  }
  ```

- **メリット**:
  - サイト階層の明確化
  - ユーザーナビゲーションの支援
  - 検索エンジンの理解向上
  - 構造化データによるSEO強化
- **導入タイミング**: サイト構造確定後

## 20. 強化されたSEO最適化（robots.txt + 動的サイトマップ）

- **推奨アプローチ**: Next.js 15 Metadata API, 動的robots.txt, 構造化データ (JSON-LD)
- **目的**: 包括的な検索エンジン最適化、クローラー制御、サイト構造の自動管理
- **実装例**:

  ```typescript
  // src/app/robots.ts - 強化されたrobots.txt
  import type { MetadataRoute } from "next";
  import { META } from "@/lib/constants";

  export default function robots(): MetadataRoute.Robots {
    return {
      rules: [
        {
          userAgent: "*",
          allow: "/",
          disallow: [
            "/examples/",     // 開発サンプルページ
            "/examples/*",    // 開発サンプル詳細ページ  
            "/login",         // 認証ページ
            "/register",      // 認証ページ
            "/dashboard/",    // 保護エリア
            "/dashboard/*",   // 保護エリア詳細
            "/profile",       // プロフィール編集
          ],
        },
        {
          userAgent: "*",
          allow: [
            "/services/",           // サービス一覧ページ
            "/services/web-development", // Web開発サービス
            "/services/creative",       // クリエイティブサービス
            "/services/consulting",     // コンサルティングサービス
            "/news/",                   // お知らせ一覧
            "/news/*",                  // 個別お知らせページ
          ],
        },
      ],
      sitemap: `${META.SITE_URL}/sitemap.xml`,
    };
  }
  ```

  ```typescript
  // src/app/sitemap.ts - 動的サイトマップ生成
  import type { MetadataRoute } from "next";
  import { META } from "@/lib/constants";
  import { getNewsItems } from "@/lib/data/news";

  export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
    const newsItems = await getNewsItems();

    return [
      // メインページ
      {
        url: META.SITE_URL,
        lastModified: new Date(),
        changeFrequency: "weekly",
        priority: 1,
      },
      // サービスページ（動的追加）
      {
        url: `${META.SITE_URL}/services`,
        lastModified: new Date(),
        changeFrequency: "monthly",
        priority: 0.8,
      },
      {
        url: `${META.SITE_URL}/services/web-development`,
        lastModified: new Date(),
        changeFrequency: "monthly",
        priority: 0.8,
      },
      {
        url: `${META.SITE_URL}/services/creative`,
        lastModified: new Date(),
        changeFrequency: "monthly",
        priority: 0.8,
      },
      {
        url: `${META.SITE_URL}/services/consulting`,
        lastModified: new Date(),
        changeFrequency: "monthly",
        priority: 0.8,
      },
      // お知らせページ（動的生成）
      {
        url: `${META.SITE_URL}/news`,
        lastModified: new Date(),
        changeFrequency: "weekly",
        priority: 0.7,
      },
      ...newsItems.map((item) => ({
        url: `${META.SITE_URL}/news/${item.id}`,
        lastModified: new Date(item.publishedAt),
        changeFrequency: "monthly" as const,
        priority: 0.6,
      })),
    ];
  }
  ```

- **SEO機能の強化点**:
  - **包括的なクローラー制御**: 公開コンテンツと非公開コンテンツの適切な分離
  - **動的サイトマップ**: サービスページとお知らせページの自動追加
  - **優先度最適化**: ページの重要度に基づく適切な priority 設定
  - **更新頻度管理**: コンテンツ種別に応じた changeFrequency 設定
  - **開発環境配慮**: 開発用ページの本番環境での非表示化
- **メリット**:
  - 検索エンジンからの可視性向上
  - クローラーの効率的な巡回支援
  - サイト構造の自動管理
  - SEO パフォーマンスの向上
  - 開発・本番環境の適切な分離
- **実装状況**: ✅ 完了（Phase 3: SEO Enhancement）

## 17. アクセシビリティ対応（WCAG 2.1 AA準拠）

- **推奨標準**: WCAG 2.1 AA, WAI-ARIA
- **目的**: 誰もが使いやすいWebサイトの構築、法的コンプライアンス
- **実装コンポーネント**:

  ```typescript
  // src/components/accessibility/accessible-input.tsx
  export function AccessibleInput({ 
    label, 
    error, 
    required = false,
    ...props 
  }: AccessibleInputProps) {
    const id = useId();
    const errorId = error ? `${id}-error` : undefined;
    
    return (
      <div>
        <label htmlFor={id} className="block text-sm font-medium">
          {label}
          {required && <span aria-label="必須" className="text-red-500">*</span>}
        </label>
        <input
          id={id}
          aria-invalid={!!error}
          aria-describedby={errorId}
          {...props}
        />
        {error && (
          <div id={errorId} role="alert" className="text-red-500 text-sm">
            {error}
          </div>
        )}
      </div>
    );
  }
  ```

- **実装機能**:
  - キーボードナビゲーション完全対応
  - スクリーンリーダー最適化
  - フォーカス管理
  - 色コントラスト基準準拠
  - ARIA属性の適切な使用
- **実装状況**: ✅ 完了（専用コンポーネント群実装済み）

## 18. パフォーマンス最適化（React 19 Compiler）

- **推奨ツール**: React 19.1.0 + Compiler, Next.js 15.3.4
- **目的**: 自動最適化による開発効率向上、パフォーマンス改善
- **実装例**:

  ```javascript
  // babel.config.js
  module.exports = {
    presets: ['next/babel'],
    plugins: [
      ['babel-plugin-react-compiler', {
        target: '19'
      }]
    ]
  };
  ```

- **メリット**:
  - memo/useCallback/useMemoの手動実装不要
  - 自動的な再レンダリング最適化
  - バンドルサイズの削減
  - 開発者体験の向上
- **実装状況**: ✅ 完了（React Compiler有効化済み）

## 19. 単体テスト（Vitest）

- **推奨ツール**: Vitest v3.2.4, Testing Library
- **目的**: 高品質なコードの維持、リグレッション防止
- **実装例**:

  ```typescript
  // src/components/__tests__/expandable-content.test.tsx
  import { render, screen, fireEvent } from '@testing-library/react';
  import { ExpandableContent } from '../expandable-content';
  
  describe('ExpandableContent', () => {
    it('should toggle content visibility', () => {
      render(
        <ExpandableContent title="Test Title">
          <p>Hidden content</p>
        </ExpandableContent>
      );
      
      const button = screen.getByRole('button');
      expect(screen.queryByText('Hidden content')).not.toBeInTheDocument();
      
      fireEvent.click(button);
      expect(screen.getByText('Hidden content')).toBeInTheDocument();
    });
  });
  ```

- **カバレッジ**:
  - コンポーネントテスト
  - カスタムフックテスト
  - バリデーションスキーマテスト
  - ユーティリティ関数テスト
- **実装状況**: ✅ 完了（包括的テストスイート）

## 20. E2Eテスト（Playwright）

- **推奨ツール**: Playwright v1.53.1, @axe-core/playwright
- **目的**: 実際のユーザーフローをシミュレーションしたテスト
- **実装例**:

  ```typescript
  // tests/basic-flow.spec.ts
  import { test, expect } from '@playwright/test';
  
  test('should navigate through main pages', async ({ page }) => {
    await page.goto('/');
    
    // ホームページの基本要素確認
    await expect(page.getByRole('heading', { name: /Next.js Boilerplate/i })).toBeVisible();
    
    // サービスページへのナビゲーション
    await page.click('[href="/services"]');
    await expect(page.getByText('サービス一覧')).toBeVisible();
    
    // 写真撮影サービスページ
    await page.click('[href="/services/photography"]');
    await expect(page.getByRole('heading', { name: /写真撮影サービス/i })).toBeVisible();
  });
  ```

- **テスト範囲**:
  - ページ遷移フロー
  - フォーム送信
  - レスポンシブデザイン
  - パフォーマンス測定
  - アクセシビリティ自動チェック
- **実装状況**: ✅ 完了（クロスブラウザー対応）

## 21. アクセシビリティテスト

- **推奨ツール**: @axe-core/playwright, Pa11y, Lighthouse
- **目的**: WCAG 2.1 AA準拠の自動検証、継続的品質保証
- **実装例**:

  ```typescript
  // tests/accessibility.spec.ts
  import { test, expect } from '@playwright/test';
  import AxeBuilder from '@axe-core/playwright';
  
  test('should not have accessibility violations', async ({ page }) => {
    await page.goto('/');
    
    const accessibilityScanResults = await new AxeBuilder({ page })
      .withTags(['wcag2a', 'wcag2aa', 'wcag21aa'])
      .analyze();
    
    expect(accessibilityScanResults.violations).toEqual([]);
  });
  ```

- **チェック項目**:
  - カラーコントラスト比
  - キーボードナビゲーション
  - スクリーンリーダー対応
  - ARIA属性の適切性
  - セマンティックHTML
- **実装状況**: ✅ 完了（自動化テストパイプライン組み込み済み）

---

## 技術スタックサマリー

### フロントエンド
- **React**: 19.1.0（Compiler有効）
- **Next.js**: 15.3.4（App Router）
- **TypeScript**: 5.x系
- **Tailwind CSS**: 4.1.10

### 認証・状態管理
- **NextAuth.js**: 5.0.0-beta.25（JWT戦略）
- **Zod**: 4.0.15（バリデーション）
- **React Hook Form**: 7.58.1

### 開発・テスト
- **Vitest**: 3.2.4（単体テスト）
- **Playwright**: 1.53.1（E2Eテスト）
- **Biome**: 2.0.5（Lint/Format）

### UI・エフェクト
- **React Three Fiber**: 9.1.2（3D効果）
- **Motion**: 12.19.1（アニメーション）
- **Radix UI**: 各種コンポーネント

---

## 今後の拡張予定

プロジェクトは基盤機能が充実しており、以下の方向性で拡張可能：

1. **データベース統合**: Prisma + PostgreSQL/MySQL
2. **決済システム**: Stripe統合
3. **CMS統合**: Headless CMS連携
4. **多言語対応**: next-intl導入
5. **PWA化**: オフライン対応
6. **マイクロフロントエンド**: Module Federation

このボイラープレートは、モダンなフロントエンド開発のベストプラクティスを実装した、即座に本格運用可能な基盤です。
